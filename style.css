body {
  font-family: sans-serif;
  padding: 20px;
  background: #f4f4f4;
  max-width: 900px;
  margin: auto;
}

.semestre {
  border: 2px solid #ccc;
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 20px;
  background: white;
}

.semestre h3 {
  margin-top: 0;
  border-bottom: 1px solid #ddd;
  padding-bottom: 5px;
}

.ramo {
  display: block;
  width: 100%;
  padding: 10px;
  margin: 6px 0;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  font-weight: bold;
  user-select: none;
  text-align: left;
}

.no-aprobado {
  background-color: purple;
}

.aprobado {
  background-color: plum;
  text-decoration: line-through;
}

.bloqueado {
  background-color: grey;
  cursor: not-allowed;
}

button {
  background-color: #ff5050;
  color: white;
  padding: 10px;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  margin-bottom: 20px;
}
// script.js

const ramos = [
  // (Lista completa de ramos del 1º al 9º semestre, ya agregados anteriormente...)
  // Esta parte no cambia
];

const estadoRamos = JSON.parse(localStorage.getItem("estadoRamos")) || {};

function crearMalla() {
  const container = document.getElementById("grid-malla");
  container.innerHTML = "";

  const semestres = [...new Set(ramos.map(r => r.semestre))];
  semestres.forEach(sem => {
    const div = document.createElement("div");
    div.classList.add("semestre");

    const titulo = document.createElement("h3");
    titulo.textContent = `Semestre ${sem}`;
    div.appendChild(titulo);

    ramos.filter(r => r.semestre === sem).forEach(ramo => {
      const btn = document.createElement("div");
      btn.textContent = `${ramo.id} - ${ramo.nombre}`;
      btn.classList.add("ramo");

      const prereqCumplido = ramo.prerequisitos.every(p => estadoRamos[p]);

      if (!prereqCumplido && ramo.prerequisitos.length > 0) {
        btn.classList.add("bloqueado");
      } else if (estadoRamos[ramo.id]) {
        btn.classList.add("aprobado");
      } else {
        btn.classList.add("no-aprobado");
      }

      btn.onclick = () => {
        if (btn.classList.contains("bloqueado")) return;
        estadoRamos[ramo.id] = !estadoRamos[ramo.id];
        localStorage.setItem("estadoRamos", JSON.stringify(estadoRamos));
        crearMalla();
      };

      div.appendChild(btn);
    });

    container.appendChild(div);
  });
}

function reiniciarMalla() {
  if (confirm("¿Estás segura que quieres reiniciar toda la malla?")) {
    localStorage.removeItem("estadoRamos");
    location.reload();
  }
}

crearMalla();

